# Release Notes

This document tracks release notes and checklists for TSFulmen releases.

**Convention**: This file maintains the **last 3 released versions** in reverse chronological order (latest first) plus any unreleased work. Older releases are archived in `docs/releases/v{version}.md`. This provides sufficient recent context for release preparation while keeping the file manageable.

## [Unreleased]

_No unreleased changes._

---

## [0.2.0] - 2026-01-13

**Release Type**: Infrastructure + Governance + SSOT
**Status**: Ready for Release

### Role-Based Agent Model, Supply Chain Security & Crucible v0.4.6

**Summary**: Major infrastructure update adopting role-based AI agent identity model (replacing named identities), trust anchor bootstrap pattern, package cooling policy for supply chain security, and comprehensive Crucible SSOT update to v0.4.6.

#### Governance: Identity → Role Migration

Migrated from named agent identities (e.g., "Module Weaver") to functional roles per Crucible AI Agents Standard v2.0.0:

| Previous      | New Role   | Use Case                        |
| ------------- | ---------- | ------------------------------- |
| Module Weaver | `devlead`  | Implementation, features, fixes |
| -             | `devrev`   | Code review, four-eyes audit    |
| -             | `infoarch` | Documentation, schemas          |
| EA Steward    | `entarch`  | Ecosystem coordination          |
| -             | `secrev`   | Security review                 |
| -             | `cicd`     | CI/CD automation                |
| -             | `dataeng`  | Data engineering                |
| -             | `prodmktg` | Product marketing               |
| -             | `uxdev`    | UX development                  |

**Files Updated**:

- `AGENTS.md` - Complete rewrite for role-based operating model
- `MAINTAINERS.md` - Removed AI Co-Maintainers section, added role table
- `docs/development/adr/*.md` - Frontmatter updated to role slugs
- `docs/tsfulmen_overview.md` - Author changed to role
- `src/*/README.md` - Attribution updated

**Attribution Format**:

```
Generated by <Model> via <Interface> under supervision of @maintainer

Co-Authored-By: <Model> <noreply@3leaps.net>
Role: <role>
Committer-of-Record: <Name> <email> [@handle]
```

#### Infrastructure: Trust Anchor Bootstrap

New `scripts/make-bootstrap.sh` implementing the sfetch → goneat trust pyramid:

1. **sfetch** installed via published installer (trust anchor)
2. **sfetch self-verify** confirms cryptographic integrity
3. **goneat** installed via sfetch with minisign verification
4. **Foundation tools** installed via `goneat doctor tools --scope foundation`

Consistent with pyfulmen/rsfulmen bootstrap patterns.

#### Supply Chain Security

**Package Cooling Policy** (`.goneat/dependencies.yaml`):

- 7-day minimum age for new packages
- 100 minimum downloads threshold
- Exception for `@fulmenhq/*` organization packages
- Build fails on violations (not alert-only)

**License Compliance**:

- Forbidden: GPL, LGPL, AGPL, MPL, CDDL
- Allowed: MIT, Apache-2.0, BSD, ISC, Unlicense, CC0
- `make license-audit` generates inventory report

**Pre-push Hooks**: Now include `dependencies` category assessment.

#### SSOT Updates: Crucible v0.4.6

- **Role Catalog Expanded**: devlead, devrev, infoarch, entarch, secrev, cicd, dataeng, prodmktg, uxdev
- **Signal Resolution Standard**: Cross-language fixtures for signal handling validation
- **TUI Design System Schemas**: `schemas/crucible-ts/design/` with color, typography, layout, component schemas
- **OpenAPI Spec Coverage Standard** (ADR-0014): Standardized API documentation coverage
- **Ecosystem Branding**: `config/crucible-ts/branding/ecosystem.yaml`
- **Similarity Module Promotion**: Relocated to `config/crucible-ts/library/similarity/`
- **Canonical URI Resolution**: Standard for spec publishing and cross-repo references

#### New Features

- **Signals Module Entry Point**: `@fulmenhq/tsfulmen/signals` for direct signal handling access
- **Embedded App Identity Fallback**: Resilient identity discovery when `.fulmen/app.yaml` not in ancestor path

#### Quality Gates

- Tests: All passing
- Lint: Clean
- TypeCheck: Clean
- License Audit: No forbidden licenses

---

## [0.1.14] - 2025-11-28

**Release Type**: Feature Update + SSOT Sync
**Status**: Released

### FulHash Extensions & CRC Support

**Summary**: Expanded the `fulhash` module with CRC32/CRC32C support, unified the hashing stack on `hash-wasm`, and added high-performance convenience helpers for multi-hashing and verification.

#### New Features: @fulmenhq/tsfulmen/fulhash

**Expanded Algorithms**:

- **CRC32**: Standard IEEE 802.3 polynomial (fast error detection)
- **CRC32C**: Castagnoli polynomial (optimized for iSCSI/SCTP)
- **Unified Stack**: All algorithms (XXH3, SHA, CRC) now powered by `hash-wasm` for consistent WASM performance and zero-dependency bloat.

**Convenience API**:

- **`multiHash(input, algorithms)`**: Compute multiple checksums (e.g., SHA256 + CRC32) in a single pass over the data.
- **`verify(input, checksum)`**: Validate data against a formatted checksum string (e.g., `crc32:cbf43926`).
- **Streaming Support**: Full streaming parity for all algorithms with async initialization.

**Performance**:

- XXH3-128: ~5 GB/s (streaming/block)
- SHA-256: ~2 GB/s
- CRC32/C: ~1.2 GB/s (via WASM)

#### SSOT Updates

- **Crucible v0.2.20**: Synced latest fulhash types and taxonomy.

#### Quality Gates

- **Tests**: 1786 tests passing (+30 new CRC/multihash tests)
- **Benchmarks**: New standalone benchmark suite in `scripts/perf/fulhash-crc-benchmark.ts`
- **Dependencies**: Removed `crc-32` and `fast-crc32c` (net -2 prod deps)

---

## [0.1.13] - 2025-11-20

**Release Type**: Bug Fix + Quality Infrastructure
**Status**: Released

### Package Integrity Validation + Telemetry Export Fix

**Critical Fix**: Resolved v0.1.11 packaging issue where `telemetry/http` and `telemetry/prometheus` modules were not built despite being documented. Fixed `tsup.config.ts` and `package.json` to include submodule entries.

**New Infrastructure**: Six automated validation scripts prevent incomplete packages from being published:

- `validate-exports.ts` - Verifies package.json exports exist in dist/
- `validate-tsup-config.ts` - Ensures tsup/package.json alignment
- `validate-source-modules.ts` - Detects unmapped source modules
- `validate-package-contents.ts` - Validates npm pack structure
- `validate-imports.ts` - Simulates consumer imports
- `validate-types.ts` - Verifies .d.ts completeness

Integrated into `prepublishOnly` hook and Makefile (`make validate-all`). All validations pass in < 5 seconds.

**Type Safety Enhancement**: Improved HTTP middleware with proper framework types:

- Added optional peerDependencies for `@types/express` and `fastify`
- Created `src/telemetry/http/types.ts` with cross-framework interfaces
- Replaced 13 undocumented `any` with typed Express/Fastify/Bun signatures
- Full TypeScript autocomplete for framework request/response objects

**Testing**: All 1749 tests passing. Quality gates: lint, typecheck, validate-all

---

**Archive Policy**: This file maintains the **last 3 released versions** plus unreleased work. Older releases are archived in `docs/releases/v{version}.md`.
